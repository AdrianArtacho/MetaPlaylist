<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MetaPlaylist Link Generator</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #111;
      color: #eee;
      padding: 2em;
      max-width: 800px;
      margin: auto;
    }

    h1 {
      margin-bottom: 1em;
    }

    label {
      display: block;
      margin-top: 1em;
      font-weight: bold;
    }

    input {
      width: 100%;
      padding: 0.5em;
      margin-top: 0.3em;
      border-radius: 6px;
      border: none;
    }

    button {
      margin-top: 1.5em;
      padding: 0.7em 1.5em;
      border: none;
      border-radius: 8px;
      background: #333;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background: #555;
    }

    textarea {
      width: 100%;
      height: 120px;
      margin-top: 1em;
      border-radius: 6px;
      padding: 0.5em;
      border: none;
      font-family: monospace;
    }
  </style>
</head>
<body>

  <h1>ðŸ”— MetaPlaylist Link Generator</h1>

  <label>Page Base URL</label>
  <input id="base" value="https://adrianartacho.github.io/MetaPlaylist/" />

  <label>Title</label>
  <input id="title" placeholder="EVENT:Conf:Murail" />

  <label>CSV (Published Google Sheet URL)</label>
  <input id="csv" placeholder="https://docs.google.com/spreadsheets/d/e/.../pub?output=csv" />

  <label>Edit Sheet URL</label>
  <input id="edit" placeholder="https://docs.google.com/spreadsheets/d/.../edit" />

  <button onclick="generate()">Generate Link</button>

  <label>Ready-to-use Performance Link</label>
  <textarea id="output" readonly></textarea>

  <script>
    function generate() {
      const base = document.getElementById("base").value.trim();
      const title = document.getElementById("title").value.trim();
      const csv = document.getElementById("csv").value.trim();
      const editRaw = document.getElementById("edit").value.trim();
  
      if (!base || !csv) {
        alert("Base URL and CSV URL are required.");
        return;
      }
  
      // Strip fragment (#...) because it will be lost anyway
      const edit = editRaw.split("#")[0];
  
      const params = new URLSearchParams();
      if (title) params.set("title", title);
      if (csv) params.set("csv", csv);
      if (edit) params.set("edit", edit);
  
      const finalUrl = base.replace(/\/$/, "") + "/?" + params.toString();
      document.getElementById("output").value = finalUrl;
    }
  </script>


</body>
</html>
